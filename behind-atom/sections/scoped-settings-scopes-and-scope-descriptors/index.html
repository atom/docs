<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>Scoped Settings, Scopes and Scope Descriptors</title>

<link rel="stylesheet" media="all" href="/assets/stylesheets/application.css" data-proofer-ignore>

<link rel="stylesheet" media="all" href="/assets/stylesheets/development.css" data-proofer-ignore>


<script type="text/javascript" src="/assets/javascripts/application.js"></script>

<script type="text/javascript">
  $(function() {
    $('#quicksearch-query').lunrSearch({

      indexUrl: '/search.json',

      quickSearchResults:  '.autocomplete-results',
      quickSearchEntries:  '.result-group',
      quickSearchTemplate: '#quicksearch-results-template',

      searchResults: '.search-container',
      searchEntries: '.search-results',
      searchTemplate: '#search-results-template'
    })
  })
</script>

  </head>
  <body class="layout-article">
    <div class="footer-push">
      <div class="top-bar">
  <div class="wrapper no-pad">

    <ul class="navigation">
      <li><h1 title="Atom: A hackable text editor for the 21st Century"><a href="https://atom.io/" class="logo-small"></a></h1></li>
      <li><a href="https://atom.io/packages">Packages</a></li>
      <li><a href="https://atom.io/themes">Themes</a></li>
      <li><a href="https://atom.io/docs" class="is-selected">Documentation</a></li>
      <li><a href="http://blog.atom.io">Blog</a></li>
      <li><a href="http://discuss.atom.io">Discuss</a></li>
    </ul>

  </div>
</div>

      <div class="wrapper documents content-push wide">
        <script id="quicksearch-results-template" type="text/mustache">
  [[#entries]]
    <a href="[[url]]" class="js-articles-quicksearch-link">[[title]]</a>
  [[/entries]]
  <a class="initial quicksearch-seemore" href="/search?q=">See more results</a>
</script>

<script id="search-results-template" type="text/mustache">
  [[#entries]]
    <li>
      <h3>
        <a href="[[url]]">[[title]]</a>
        <div class="label"><a href="[[category_url]]">[[category]]</a></div>
      </h3>
      <p>
      [[excerpt]]
      </p>
    </li>
  [[/entries]]
</script>

<div class="documents-search">
  <form accept-charset="UTF-8" action="/search" id="articles-search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
    <input type="search" name="q" id="quicksearch-query" class="documents-search-input js-articles-quicksearch" placeholder="Search the Flight Manual" autocomplete="off">
  </form>
</div>

<div class="autocomplete-results" style="display: none;">
  <div class="result-group"></div>
</div>


        <div class="toc">
          


<h4>Chapter 1: Getting Started</h4>
<ul>
  
  
    <li class="unselected">
      <a href="/getting-started/sections/why-atom">Why Atom?</a>
    </li>
    
  
    <li class="unselected">
      <a href="/getting-started/sections/installing-atom">Installing Atom</a>
    </li>
    
  
    <li class="unselected">
      <a href="/getting-started/sections/atom-basics">Atom Basics</a>
    </li>
    
  
    <li class="unselected">
      <a href="/getting-started/sections/summary">Summary</a>
    </li>
    
  
  
</ul>


<h4>Chapter 2: Using Atom</h4>
<ul>
  
  
    <li class="unselected">
      <a href="/using-atom/sections/atom-packages">Atom Packages</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/moving-in-atom">Moving in Atom</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/atom-selections">Atom Selections</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/editing-and-deleting-text">Editing and Deleting Text</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/find-and-replace">Find and Replace</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/snippets">Snippets</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/autocomplete">Autocomplete</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/folding">Folding</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/panes">Panes</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/grammar">Grammar</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/version-control-in-atom">Version Control in Atom</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/writing-in-atom">Writing in Atom</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/basic-customization">Basic Customization</a>
    </li>
    
  
    <li class="unselected">
      <a href="/using-atom/sections/summary">Summary</a>
    </li>
    
  
  
</ul>


<h4>Chapter 3: Hacking Atom</h4>
<ul>
  
  
    <li class="unselected">
      <a href="/hacking-atom/sections/tools-of-the-trade">Tools of the Trade</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/the-init-file">The Init File</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/package-word-count">Package: Word Count</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/package-modifying-text">Package: Modifying Text</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/creating-a-theme">Creating a Theme</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/iconography">Iconography</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/debugging">Debugging</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/writing-specs">Writing specs</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/converting-from-textmate">Converting from TextMate</a>
    </li>
    
  
    <li class="unselected">
      <a href="/hacking-atom/sections/summary">Summary</a>
    </li>
    
  
  
</ul>


<h4>Chapter 4: Behind Atom</h4>
<ul>
  
  
    <li class="unselected">
      <a href="/behind-atom/sections/configuration-api">Configuration API</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/keymaps-in-depth">Keymaps In-Depth</a>
    </li>
    
  
    <li class="selected">
      <a href="/behind-atom/sections/scoped-settings-scopes-and-scope-descriptors">Scoped Settings, Scopes and Scope Descriptors</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/serialization-in-atom">Serialization in Atom</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/developing-node-modules">Developing Node Modules</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/interacting-with-other-packages-via-services">Interacting With Other Packages Via Services</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/maintaining-your-packages">Maintaining Your Packages</a>
    </li>
    
  
    <li class="unselected">
      <a href="/behind-atom/sections/summary">Summary</a>
    </li>
    
  
  
</ul>


<h4>Chapter 5: Upgrading to 1.0 APIs</h4>
<ul>
  
  
    <li class="unselected">
      <a href="/upgrading-to-1-0-apis/sections/upgrading-your-package">Upgrading Your Package</a>
    </li>
    
  
    <li class="unselected">
      <a href="/upgrading-to-1-0-apis/sections/upgrading-your-ui-theme-or-package-selectors">Upgrading Your UI Theme Or Package Selectors</a>
    </li>
    
  
    <li class="unselected">
      <a href="/upgrading-to-1-0-apis/sections/upgrading-your-syntax-theme">Upgrading Your Syntax Theme</a>
    </li>
    
  
  
</ul>


        </div>
        <div class="markdown-body document-content">
          
          <h1>4.3 Scoped Settings, Scopes and Scope Descriptors</h1>
          <div class="sect2">
<h3 id="scoped-settings-scopes-and-scope-descriptors">Scoped Settings, Scopes and Scope Descriptors</h3>
<div class="paragraph">
<p>Atom supports language-specific settings. You can soft wrap only Markdown files, or set the tab length to 4 in Python files.</p>
</div>
<div class="paragraph">
<p>Language-specific settings are a subset of something more general we call "scoped settings". Scoped settings allow targeting down to a specific syntax token type. For example, you could conceivably set a setting to target only Ruby comments, only code inside Markdown files, or even only JavaScript function names.</p>
</div>
<div class="sect3">
<h4 id="scope-names-in-syntax-tokens">Scope names in syntax tokens</h4>
<div class="paragraph">
<p>Each token in the editor has a collection of scope names. For example, the aforementioned JavaScript function name might have the scope names <code>function</code> and <code>name</code>. An open paren might have the scope names <code>punctuation</code>, <code>parameters</code>, <code>begin</code>.</p>
</div>
<div class="paragraph">
<p>Scope names work just like CSS classes. In fact, in the editor, scope names are attached to a token’s DOM node as CSS classes.</p>
</div>
<div class="paragraph">
<p>Take this piece of JavaScript:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-js"><code><span class="kd">function</span> <span class="nx">functionName</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Log it out'</span><span class="p">);</span>
<span class="p">}</span></code></pre>

</div>
</div>
<div class="paragraph">
<p>In the dev tools, the first line’s markup looks like this.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../images/markup.png" alt="markup">
</div>
<div class="title">Figure 1. Markup</div>
</div>
<div class="paragraph">
<p>All the class names on the spans are scope names. Any scope name can be used to target a setting’s value.</p>
</div>
</div>
<div class="sect3">
<h4 id="scope-selectors">Scope Selectors</h4>
<div class="paragraph">
<p>Scope selectors allow you to target specific tokens just like a CSS selector targets specific nodes in the DOM. Some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-coffee"><code><span class="s">'.source.js'</span> <span class="c1"># selects all javascript tokens
</span><span class="s">'.source.js .function.name'</span> <span class="c1"># selects all javascript function names
</span><span class="s">'.function.name'</span> <span class="err">#</span> <span class="nx">selects</span> <span class="nx">all</span> <span class="nx">function</span> <span class="nx">names</span> <span class="k">in</span> <span class="nx">any</span> <span class="nx">language</span></code></pre>

</div>
</div>
<div class="paragraph">
<p><a href="https://atom.io/docs/api/latest/Config#instance-set"><code>Config::set</code></a> accepts a <code>scopeSelector</code>. If you’d like to set a setting for JavaScript function names, you can give it the js function name <code>scopeSelector</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-coffee"><code><span class="nx">atom</span><span class="p">.</span><span class="na">config</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">'my-package.my-setting'</span><span class="p">,</span> <span class="s">'special value'</span><span class="p">,</span> <span class="na">scopeSelector</span><span class="o">:</span> <span class="s">'.source.js .function.name'</span><span class="p">)</span></code></pre>

</div>
</div>
</div>
<div class="sect3">
<h4 id="scope-descriptors">Scope Descriptors</h4>
<div class="paragraph">
<p>A scope descriptor is an <a href="https://atom.io/docs/api/latest/ScopeDescriptor">Object</a> that wraps an <code>Array</code> of `String`s. The Array describes a path from the root of the syntax tree to a token including <em>all</em> scope names for the entire path.</p>
</div>
<div class="paragraph">
<p>In our JavaScript example above, a scope descriptor for the function name token would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-coffee"><code><span class="p">[</span><span class="s">'source.js'</span><span class="p">,</span> <span class="s">'meta.function.js'</span><span class="p">,</span> <span class="s">'entity.name.function.js'</span><span class="p">]</span></code></pre>

</div>
</div>
<div class="paragraph">
<p><a href="https://atom.io/docs/api/latest/Config#instance-get"><code>Config::get</code></a> accepts a <code>scopeDescriptor</code>. You can get the value for your setting scoped to JavaScript function names via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-coffee"><code><span class="nx">scopeDescriptor</span> <span class="o">=</span> <span class="p">[</span><span class="s">'source.js'</span><span class="p">,</span> <span class="s">'meta.function.js'</span><span class="p">,</span> <span class="s">'entity.name.function.js'</span><span class="p">]</span>
<span class="nx">value</span> <span class="o">=</span> <span class="nx">atom</span><span class="p">.</span><span class="na">config</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">'my-package.my-setting'</span><span class="p">,</span> <span class="na">scope</span><span class="o">:</span> <span class="nx">scopeDescriptor</span><span class="p">)</span></code></pre>

</div>
</div>
<div class="paragraph">
<p>But, you do not need to generate scope descriptors by hand. There are a couple methods available to get the scope descriptor from the editor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://atom.io/docs/api/latest/TextEditor#instance-getRootScopeDescriptor"><code>Editor::getRootScopeDescriptor</code></a> to get the language’s descriptor. eg. <code>[".source.js"]</code></p>
</li>
<li>
<p><a href="https://atom.io/docs/api/latest/TextEditor#instance-scopeDescriptorForBufferPosition"><code>Editor::scopeDescriptorForBufferPosition</code></a> to get the descriptor at a specific position in the buffer.</p>
</li>
<li>
<p><a href="https://atom.io/docs/api/latest/Cursor#instance-getScopeDescriptor"><code>Cursor::getScopeDescriptor</code></a> to get a cursor’s descriptor based on position. eg. if the cursor were in the name of the method in our example it would return <code>["source.js", "meta.function.js", "entity.name.function.js"]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s revisit our example using these methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight highlight-coffee"><code><span class="nx">editor</span> <span class="o">=</span> <span class="nx">atom</span><span class="p">.</span><span class="na">workspace</span><span class="p">.</span><span class="na">getActiveTextEditor</span><span class="p">()</span>
<span class="nx">cursor</span> <span class="o">=</span> <span class="nx">editor</span><span class="p">.</span><span class="na">getLastCursor</span><span class="p">()</span>
<span class="nx">valueAtCursor</span> <span class="o">=</span> <span class="nx">atom</span><span class="p">.</span><span class="na">config</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">'my-package.my-setting'</span><span class="p">,</span> <span class="na">scope</span><span class="o">:</span> <span class="nx">cursor</span><span class="p">.</span><span class="na">getScopeDescriptor</span><span class="p">())</span>
<span class="nx">valueForLanguage</span> <span class="o">=</span> <span class="nx">atom</span><span class="p">.</span><span class="na">config</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">'my-package.my-setting'</span><span class="p">,</span> <span class="na">scope</span><span class="o">:</span> <span class="nx">editor</span><span class="p">.</span><span class="na">getRootScopeDescriptor</span><span class="p">())</span></code></pre>

</div>
</div>
</div>
</div>
        </div>
      </div>
      <div class="footer-pad"></div>
    </div>
    <footer>
  <div class="footer">
    <div class="wrapper no-pad">
      <ul class="footer-left">
        <li><a href="https://atom.io/terms">Terms of Use</a></li>
        <li><a href="https://help.github.com/articles/github-privacy-policy/">Privacy</a></li>
        <li><a href="http://contributor-covenant.org/version/1/2/0">Code of Conduct</a></li>
        <li><a href="https://atom.io/releases">Releases</a></li>
        <li><a href="https://atom.io/faq">FAQ</a></li>
        <li><a href="https://atom.io/contact">Contact</a></li>
      </ul>

      <div class="footer-right">
        <a href="https://github.com"><span class="octicon octicon-code"></span> with <span class="octicon octicon-heart"></span> by <span class="octicon octicon-logo-github"></span></a>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
